import React, { useState } from 'react'
import { useRefresh } from '../../hooks/useRefresh';
import { useDispatch } from 'react-redux';
import { useNavigate, useParams } from 'react-router-dom';
import { addExerciseThunk } from '../../redux/user/thunk';
import { StyledContainer } from '../../style/components/StyledContainer';
import { StyledWrapper } from '../../style/components/StyledWrapper';
import { StyledHeading } from '../../style/components/StyledHeading';
import { NavBarGuru } from '../partials/NavBarGuru';
import { green } from '../../style/ColorVariable';
import { Form } from '../partials/Form';


export const TambahExercise = () => {

    const { id } = useParams();
    const dispatch = useDispatch()
    const navigate = useNavigate()

    const [judulExercise, setJudulExercise] = useState('');
    const [token, tokenExp] = useRefresh('guru');

    const randomCode = (() => {
        const date = new Date().getTime().toString().substring(8);
        return date;
    })();

    const body = {
        codeExercise: randomCode,
        judulExercise: judulExercise,
        idcourse: id
    }

    const post = (e) => {
        e.preventDefault();
        dispatch(addExerciseThunk(body, token, tokenExp))
        navigate(`/add-soal/${randomCode}`, { replace: true });
    }

    return (
        <StyledContainer flex="flex">
            <NavBarGuru />
            <StyledWrapper>
                <StyledHeading backgroundcolor={green}>
                    Tambah Exercise
                </StyledHeading>

                <Form
                    typeOne="text"
                    nameOne="Judul Exercise"
                    onSubmit={post}
                    onChangeOne={e => setJudulExercise(e.target.value)}
                    valueOne={judulExercise}
                    header="Masukan Judul Exercise"
                    svg='<svg width="80" height="80" viewBox="0 0 140 130" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M116.667 36.1111C116.667 33.2379 117.896 30.4824 120.084 28.4508C122.272 26.4191 125.239 25.2778 128.333 25.2778C131.428 25.2778 134.395 26.4191 136.583 28.4508C138.771 30.4824 140 33.2379 140 36.1111V109.428L128.333 125.678L116.667 109.428V36.1111ZM128.333 32.5C127.302 32.5 126.313 32.8805 125.583 33.5577C124.854 34.2349 124.444 35.1534 124.444 36.1111V107.239L128.333 112.656L132.222 107.239V36.1111C132.222 35.1534 131.812 34.2349 131.083 33.5577C130.354 32.8805 129.365 32.5 128.333 32.5Z" fill="black"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M136.111 50.5556H120.556V43.3333H136.111V50.5556ZM15.5556 7.22222C13.4928 7.22222 11.5145 7.98313 10.0558 9.33756C8.59722 10.692 7.77778 12.529 7.77778 14.4444V115.556C7.77778 117.471 8.59722 119.308 10.0558 120.662C11.5145 122.017 13.4928 122.778 15.5556 122.778H93.3333C95.3961 122.778 97.3744 122.017 98.8331 120.662C100.292 119.308 101.111 117.471 101.111 115.556V14.4444C101.111 12.529 100.292 10.692 98.8331 9.33756C97.3744 7.98313 95.3961 7.22222 93.3333 7.22222H15.5556ZM0 14.4444C0 10.6135 1.63888 6.93954 4.55612 4.23068C7.47335 1.52182 11.43 0 15.5556 0H93.3333C97.4589 0 101.416 1.52182 104.333 4.23068C107.25 6.93954 108.889 10.6135 108.889 14.4444V115.556C108.889 119.386 107.25 123.06 104.333 125.769C101.416 128.478 97.4589 130 93.3333 130H15.5556C11.43 130 7.47335 128.478 4.55612 125.769C1.63888 123.06 0 119.386 0 115.556V14.4444Z" fill="black"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M54.4444 32.5C54.4444 31.5423 54.8541 30.6238 55.5835 29.9466C56.3128 29.2693 57.3019 28.8889 58.3333 28.8889H89.4444C90.4758 28.8889 91.465 29.2693 92.1943 29.9466C92.9236 30.6238 93.3333 31.5423 93.3333 32.5C93.3333 33.4577 92.9236 34.3762 92.1943 35.0534C91.465 35.7307 90.4758 36.1111 89.4444 36.1111H58.3333C57.3019 36.1111 56.3128 35.7307 55.5835 35.0534C54.8541 34.3762 54.4444 33.4577 54.4444 32.5ZM54.4444 46.9444C54.4444 45.9867 54.8541 45.0682 55.5835 44.391C56.3128 43.7138 57.3019 43.3333 58.3333 43.3333H89.4444C90.4758 43.3333 91.465 43.7138 92.1943 44.391C92.9236 45.0682 93.3333 45.9867 93.3333 46.9444C93.3333 47.9022 92.9236 48.8207 92.1943 49.4979C91.465 50.1751 90.4758 50.5556 89.4444 50.5556H58.3333C57.3019 50.5556 56.3128 50.1751 55.5835 49.4979C54.8541 48.8207 54.4444 47.9022 54.4444 46.9444ZM54.4444 79.4445C54.4444 78.4867 54.8541 77.5682 55.5835 76.891C56.3128 76.2138 57.3019 75.8333 58.3333 75.8333H89.4444C90.4758 75.8333 91.465 76.2138 92.1943 76.891C92.9236 77.5682 93.3333 78.4867 93.3333 79.4445C93.3333 80.4022 92.9236 81.3207 92.1943 81.9979C91.465 82.6751 90.4758 83.0556 89.4444 83.0556H58.3333C57.3019 83.0556 56.3128 82.6751 55.5835 81.9979C54.8541 81.3207 54.4444 80.4022 54.4444 79.4445ZM54.4444 93.8889C54.4444 92.9312 54.8541 92.0127 55.5835 91.3354C56.3128 90.6582 57.3019 90.2778 58.3333 90.2778H89.4444C90.4758 90.2778 91.465 90.6582 92.1943 91.3354C92.9236 92.0127 93.3333 92.9312 93.3333 93.8889C93.3333 94.8466 92.9236 95.7651 92.1943 96.4423C91.465 97.1196 90.4758 97.5 89.4444 97.5H58.3333C57.3019 97.5 56.3128 97.1196 55.5835 96.4423C54.8541 95.7651 54.4444 94.8466 54.4444 93.8889ZM23.3333 79.4445V90.2778H35V79.4445H23.3333ZM19.4444 72.2222H38.8889C39.9203 72.2222 40.9094 72.6027 41.6387 73.2799C42.368 73.9571 42.7778 74.8756 42.7778 75.8333V93.8889C42.7778 94.8466 42.368 95.7651 41.6387 96.4423C40.9094 97.1196 39.9203 97.5 38.8889 97.5H19.4444C18.413 97.5 17.4239 97.1196 16.6946 96.4423C15.9653 95.7651 15.5555 94.8466 15.5555 93.8889V75.8333C15.5555 74.8756 15.9653 73.9571 16.6946 73.2799C17.4239 72.6027 18.413 72.2222 19.4444 72.2222ZM45.5272 29.9469C46.2563 30.6241 46.6658 31.5425 46.6658 32.5C46.6658 33.4575 46.2563 34.3759 45.5272 35.0531L27.2222 52.0506L16.695 42.2753C16.3236 41.9422 16.0273 41.5437 15.8235 41.1031C15.6197 40.6626 15.5124 40.1887 15.5079 39.7092C15.5034 39.2297 15.6018 38.7542 15.7973 38.3104C15.9929 37.8667 16.2816 37.4635 16.6468 37.1244C17.0119 36.7854 17.4461 36.5172 17.9241 36.3356C18.402 36.1541 18.9141 36.0627 19.4304 36.0669C19.9468 36.071 20.4571 36.1707 20.9316 36.3599C21.406 36.5492 21.8351 36.8243 22.1939 37.1692L27.2222 41.8383L40.0283 29.9469C40.7576 29.27 41.7466 28.8897 42.7778 28.8897C43.809 28.8897 44.7979 29.27 45.5272 29.9469Z" fill="black"/>
                    </svg>
                    '
                />

            </StyledWrapper>
        </StyledContainer>
    )
}